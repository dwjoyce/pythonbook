\makeatletter

% Sans font
\usepackage{sans}
\renewcommand{\sfdefault}{\rmdefault}

\usepackage[T1]{fontenc}
\usepackage[scaled]{beramono}
\usepackage[table]{xcolor}

% Start numbering at zero
\setcounter{chapter}{-1}
\renewcommand\thesection{\thechapter.\the\numexpr\value{section}-1\relax}

% Code block border
% \fvset{frame=lines}
\fvset{formatcom=\color{VerbatimTextColor}}


% Code background


\newcommand{\ourstrut}{\vrule height6.5pt depth1.2pt width0pt}
\newcommand{\setlengths}{\setlength\parskip{0pt}\setlength\itemsep{0ex}\setlength\topsep{0ex}\setlength\partopsep{0pt}\setlength\leftmargin{0pt}}
\renewcommand{\code}[1]{{\setlengths{\fcolorbox{VerbatimBorderColor}{VerbatimColor}{\ourstrut\texttt{\small\color{VerbatimTextColor}#1}}}}}

% Quote

\let\Oldquote\quote
\let\Oldendquote\endquote
\def\quote{\Oldquote\itshape}
\def\endquote{\upshape\Oldendquote}

% Table row colors

\rowcolors{2}{VerbatimColor}{white}
\def\arraystretch{2}
\setlength{\extrarowheight}{-2.75pt}

% http://tex.stackexchange.com/a/58391
\usepackage{etoolbox}
\preto\tabular{\global\rownum=\z@}

% remove blank pages
\@openrightfalse

% title stuff
\usepackage{titling}
\usepackage{afterpage}
\usepackage{anyfontsize}

% Chapter num spacing

\renewcommand{\TheAlphaChapter}{%

\ifinapp
  \thechapter
\else
  \setcounter{AlphaCnt}{\c@chapter}
  \ifnum\c@chapter<20
    \AlphaNo
  \else
    \AlphaDecNo\enspace\AlphaNo
  \fi
\fi
}

% Chapter quotes

\newenvironment{chapquote}[1]
  {\vspace{-10mm}\def\chapquote@author{#1}%
   \begin{flushright}\begin{minipage}{0.618\textwidth}\begin{flushright}%
   \itshape}
  {\\[2mm]\normalfont\small--- \chapquote@author\end{flushright}\end{minipage}\end{flushright}\vspace{2mm}\normalsize}

% No hyphenation

\usepackage[none]{hyphenat}
\raggedright

% Code continued code

\makeatletter
\newcount\bt@count


\def\breaktext#1#2{%
\par%
\nobreak%
\global\advance\bt@count\@ne%
\expandafter\label\expandafter{\the\bt@count bt@count}%
\protected@edef\@tempa{\csname r@\the\bt@count bt@count\endcsname}%
\global\advance\bt@count\@ne%
\protected@edef\@tempb{\csname r@\the\bt@count bt@count\endcsname}%
\expandafter\ifx\expandafter\relax\@tempa%
% \typeout{relax}%
\penalty\z@%
\else%
% \typeout{[\@tempa][\@tempb]}%
\ifx\@tempa\@tempb%
% \typeout{equal}%
\penalty\z@%
\else%
% \typeout{page break}%
#1\par\break#2\par\nobreak%
\fi%
\fi%
\expandafter\label\expandafter{\the\bt@count bt@count}%
\nobreak%
}
\newlength{\charwidth}
\settowidth{\charwidth}{\texttt{\small{ }}}

% Non-verbatim env for code

\newcommand{\nonverbatim}[1]{%
  % list starts new par, but we don't want it to be set apart vertically
  \bgroup%
  \parskip=0pt%
  \smallskip%
  \setlength\parskip{0pt}%
  \setlength\itemsep{0ex}%
  \setlength\topsep{0ex}%
  \setlength\partopsep{0pt}%
  \setlength\leftmargin{0pt}%
  \@totalleftmargin=0cm%
  \MakeFramed {\FrameRestore}%
    \texttt{\small #1}
  \endMakeFramed%
  % close group to restore \parskip
  \egroup%
%   \par
}


\makeatother